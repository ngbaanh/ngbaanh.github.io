<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.19" />
  <meta name="author" content="Bá Anh Nguyễn">
  <meta name="description" content="Junior Developer">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Lora|Roboto+Mono"> 
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  <link rel="alternate" href="https://ngbaanh.github.io/index.xml" type="application/rss+xml" title="Bá Anh Nguyễn">
  <link rel="feed" href="https://ngbaanh.github.io/index.xml" type="application/rss+xml" title="Bá Anh Nguyễn">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://ngbaanh.github.io/post/tap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh/">

  

  <title>☘Tập Code 3: Tỉnh táo với phép so sánh khi lập trình | Bá Anh Nguyễn</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Bá Anh Nguyễn</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  

  <div class="article-container">
    <h1 itemprop="name">☘Tập Code 3: Tỉnh táo với phép so sánh khi lập trình</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2017-04-08 23:15:00 &#43;0000 UTC" itemprop="datePublished">
      Sat, Apr 8, 2017
    </time>
  </span>

  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/tags/t%e1%ba%adp-code">tập code</a
    >, 
    
    <a href="/tags/c">C</a
    >, 
    
    <a href="/tags/java">Java</a
    >, 
    
    <a href="/tags/practice-code">practice code</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fngbaanh.github.io%2fpost%2ftap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=%e2%98%98T%e1%ba%adp%20Code%203%3a%20T%e1%bb%89nh%20t%c3%a1o%20v%e1%bb%9bi%20ph%c3%a9p%20so%20s%c3%a1nh%20khi%20l%e1%ba%adp%20tr%c3%acnh&amp;url=https%3a%2f%2fngbaanh.github.io%2fpost%2ftap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fngbaanh.github.io%2fpost%2ftap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh%2f&amp;title=%e2%98%98T%e1%ba%adp%20Code%203%3a%20T%e1%bb%89nh%20t%c3%a1o%20v%e1%bb%9bi%20ph%c3%a9p%20so%20s%c3%a1nh%20khi%20l%e1%ba%adp%20tr%c3%acnh"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fngbaanh.github.io%2fpost%2ftap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh%2f&amp;title=%e2%98%98T%e1%ba%adp%20Code%203%3a%20T%e1%bb%89nh%20t%c3%a1o%20v%e1%bb%9bi%20ph%c3%a9p%20so%20s%c3%a1nh%20khi%20l%e1%ba%adp%20tr%c3%acnh"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=%e2%98%98T%e1%ba%adp%20Code%203%3a%20T%e1%bb%89nh%20t%c3%a1o%20v%e1%bb%9bi%20ph%c3%a9p%20so%20s%c3%a1nh%20khi%20l%e1%ba%adp%20tr%c3%acnh&amp;body=https%3a%2f%2fngbaanh.github.io%2fpost%2ftap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      

<p><img src="/img/post_img/tap-code-03/comparison.jpg" alt="comparison - (c) Personal Trainer Land" />
<em>Chú ý: Các vấn đề đang bàn luận chỉ xét trong phạm vi ngôn ngữ</em> <code>C</code>, <code>C++</code> <em>và</em> <code>Java</code>. <em>Các ngôn ngữ khác sẽ có những đặc trưng riêng có thể không giống với những gì bên dưới</em></p>

<h1 id="1-so-sánh-hai-chuỗi">1. So sánh hai chuỗi</h1>

<p>Và đây là lỗi mà đa số các bạn mới học <code>C</code> hoặc <code>Java</code> mắc phải:</p>

<pre><code class="language-c">if (string1 == string2) {
  // làm gì đó
}
</code></pre>

<p>Cảm quan thì &lsquo;có vẻ&rsquo; đúng lắm nhưng tiếc là không đúng với ý tưởng người tạo ra ngôn ngữ. Nguyên nhân sâu xa thì mình không biết nhưng mà chỉ nhớ phải theo các quy tắc của người ta.
Với C/C++:</p>

<pre><code class="language-c">if ( strcmp(string1, string2) == 0 ) {
  // làm gì đó
}
</code></pre>

<p>Ở đây <code>strcmp</code> là viết tắt của <code>string comparison</code>, thuộc <code>string.h</code>, có chức năng so sánh hai chuỗi theo thứ tự chữ cái trong từ điển. Giá trị trả về <code>0</code> cho biết 2 chuỗi bằng nhau, giá trị trả về <code>âm</code> thì <code>string1</code> ở trước <code>string2</code>, giá trị trả về <code>dương</code> thì <code>string1</code> ở sau <code>string2</code>.</p>

<p>Còn với Java:</p>

<pre><code class="language-c">if ( string1.equals(string2) ) {
  // làm gì đó
}
</code></pre>

<p>Với Java thì nó đơn giản dễ hiểu hơn nhiều, còn với C thì ta cần quay lại một chút. Xem ví dụ bên dưới:</p>

<pre><code class="language-c">#include &lt;string.h&gt;
#include &lt;stdio.h&gt;

void so_sanh(const char* chuoi_1, const char* chuoi_2) {
    int gia_tri = strcmp(chuoi_1, chuoi_2);
    printf(&quot;gia_tri = %d \n&quot;, gia_tri);
    if (gia_tri == 0) {
      printf(&quot;'%s' BANG '%s' \n&quot;, chuoi_1, chuoi_2);
    } else if (gia_tri &lt; 0) {
      printf(&quot;'%s' NHO HON '%s' \n&quot;, chuoi_1, chuoi_2);  
    } else if(gia_tri &gt; 0) {
      printf(&quot;'%s' LON HON '%s' \n&quot;, chuoi_1, chuoi_2);
    }
    printf(&quot;-------------\n\n&quot;);
}

int main() {
    const char* chuoi = &quot;Xin chao&quot;;
    so_sanh(chuoi, &quot;Xin chao!&quot;); // co them dau '!'
    so_sanh(chuoi, &quot;Xin chao&quot;);
    so_sanh(chuoi, &quot;Xin chao ban&quot;);
    so_sanh(chuoi, &quot;Chao&quot;);
}
</code></pre>

<p>Kết quả là:</p>

<pre><code class="language-sh">gia_tri = -33
'Xin chao' NHO HON 'Xin chao!'
-------------

gia_tri = 0
'Xin chao' BANG 'Xin chao'
-------------

gia_tri = -32
'Xin chao' NHO HON 'Xin chao ban'
-------------

gia_tri = 21
'Xin chao' LON HON 'Chao'
-------------
</code></pre>

<p>Rõ rồi nhưng mà cái <code>gia_tri</code> là cái gì mà mỗi lần so sánh nó lại ra một số khác nhau thế? Để kiểm tra lại nó cụ thể là cái gì thì có thể sửa lại trong hàm <code>so_sanh</code>:</p>

<pre><code class="language-c">// ...
#include &lt;stdlib.h&gt;

void so_sanh(const char* chuoi_1, const char* chuoi_2) {
    int gia_tri = strcmp(chuoi_1, chuoi_2);
    printf(&quot;gia_tri = %d ---&gt; '%c' \n&quot;, gia_tri, abs(gia_tri));
    //...
}
//...
</code></pre>

<p>Kết quả là:</p>

<pre><code class="language-sh">gia_tri = -33 ---&gt; '!'
'Xin chao' NHO HON 'Xin chao!'
-------------

gia_tri = 0 ---&gt; ''
'Xin chao' BANG 'Xin chao'
-------------

gia_tri = -32 ---&gt; ' '
'Xin chao' NHO HON 'Xin chao ban'
-------------

gia_tri = 21 ---&gt; ''
'Xin chao' LON HON 'Chao'
-------------
</code></pre>

<p>Rõ rồi nhé, giá trị chính là số thứ tự của kí tự khác nhau đầu tiên trong bảng ASCII. 33 là kí tự chấm than, còn 32 là kí tự trắng. Còn dấu thì chỉ để xem cái nào nhỏ hơn hay lớn hơn mà thôi. Còn kí tự số 21 là kí tự điều khiển, không in ra được nên sẽ có <code>''</code>.</p>

<div class="alert alert-note">
  <p>Chú ý hàm strcmp() so sánh kiểu thứ tự từ điển, bảng alphabet của tiếng anh sẽ có khác một số ngôn ngữ khác, khi đó giải pháp thay thế là strcoll(), mình sẽ không giải thích ở đây.</p>

</div>


<h1 id="2-so-sánh-hai-số-thực">2. So sánh hai số thực</h1>

<p>Đa số các ngôn ngữ lập trình đều có 2 kiểu số thực là <code>float</code> và <code>double</code>. Nhiều khi bất cẩn ta có thể sẽ có những phép so sánh như sau:</p>

<pre><code class="language-c">float a = 0.123;
double b = 0.123;
printf(&quot;A = %f \nB = %f\n&quot;, a, b);
if (a == b) {
  printf(&quot;BANG NHAU \n&quot;);
} else {
  printf(&quot;KHAC NHAU \n&quot;);
}
</code></pre>

<p>Thực tiễn hai số đó bằng nhau nhưng vào máy thì 🤣</p>

<pre><code class="language-sh">A = 0.123000
B = 0.123000
KHAC NHAU
</code></pre>

<p>Code chạy ngon lành nhưng đôi khi không biết lỗi ở đâu ra, cái này thực sự rất nguy hiểm.</p>

<h1 id="3-thực-hiện-phép-tính-trong-mệnh-đề-điều-kiện">3. Thực hiện phép tính trong mệnh đề điều kiện</h1>

<p>Cái này một số bạn vẫn sẽ mắc bẫy vì đôi khi muốn rút gọn phép tính vào ngay trong lúc so sánh. Ví dụ bài toán kiểm tra số nguyên <code>a</code> có gấp ba số <code>b</code> hay không?</p>

<pre><code class="language-c">int a = 30, b = 10;
if (a / 3 == b) {
  printf(&quot;A gap ba B&quot;);
} else {
  printf(&quot;A khong gap ba B&quot;);
}
</code></pre>

<p>Kết quả:</p>

<pre><code class="language-sh">A gap ba B
</code></pre>

<p>Cũng đoạn trên thay thành <code>a = 10, b = 3</code>, ta có kết quả mới:</p>

<pre><code class="language-sh">A gap ba B
</code></pre>

<p>Vi diệu chưa? Sai tè le luôn. Bởi vì kết quả phép chia 2 số nguyên sẽ luôn là một số nguyên. Việc tính toán ở đây phải cẩn thận vì bên cạnh trường hợp làm tròn số thì còn lỗi tràn nữa:</p>

<pre><code class="language-c">char a = 200;
if (a * 2 &gt; 100) {
  printf (&quot;2A &gt; 100&quot;);
} else {
  printf (&quot;2A &lt;= 100&quot;);
}
</code></pre>

<p>Kết quả:</p>

<pre><code class="language-sh">2A &lt;= 100
</code></pre>

<p>Vâng, <code>400 &lt;= 100</code> chỉ vì nó tràn kiểu dữ liệu <code>char</code> (tối đa 255 nên 2 * 200 = -112, và máy nó hiểu -112 &lt;= 100 là đúng).</p>

<div class="alert alert-warning">
  <p>Đặt phép tính vào lúc so sánh, là hành động bóp d*i thằng debugger, chiêu thức này ẩn chứa nguy hiểm tiềm tàng có thể dẫn đến vô sinh xin các bạn cẩn thận.</p>

</div>


<h1 id="4-so-sánh-x-0-hay-0-x">4. So sánh: x == 0 hay 0 == x?</h1>

<p>Lúc đi học thì gần như 100% người học đều được dạy rằng muốn so sánh A với một hằng B thì cứ nhất nhất là bên trái là A, bên phải là B. Nhưng mà với kiểu dữ liệu tham chiếu, liên quan đến con trỏ và đối tượng thì đây mới là vấn đề.</p>

<blockquote>
<p>Bạn sẽ gặp NULL như chưa từng gặp với kiểu so sánh thứ nhất.</p>
</blockquote>

<p>Ví dụ 1 đoạn code Java kiểm tra 1 thằng có học lớp &ldquo;CNTT&rdquo; (là một chuỗi hằng) hay không.</p>

<pre><code class="language-java">class HocSinh {
	String hoTen;
	Lop lop;
}
class Lop {
	String tenLop;
	String giaoVienChuNhiem;
}

public class Main {
	public static void main(String[] args) {
		HocSinh baAnh = new HocSinh();

		if (baAnh.lop.equals(&quot;CNTT&quot;)) { // So sánh
			System.out.print(&quot;Học lớp CNTT&quot;);
		} else {
			System.out.print(&quot;Không học lớp CNTT&quot;);
		}
	}
}
</code></pre>

<p>Thử chạy phát:</p>

<pre><code class="language-sh">Exception in thread &quot;main&quot; java.lang.NullPointerException
	at Main.main(Main.java:15)
</code></pre>

<p>Do <code>baAnh.lop</code> chưa được khởi tạo nên dẽ dính <code>null</code> sẽ bị lỗi. Giải pháp nghĩ đến đầu tiên là kiểm tra khác null trước khi so sánh.</p>

<pre><code class="language-java">if (baAnh.lop != null &amp;&amp; baAnh.lop.equals(&quot;CNTT&quot;)) { ... }
</code></pre>

<p>Và nó đã chạy:</p>

<pre><code class="language-sh">Không học lớp CNTT
</code></pre>

<p>May quá mới so sánh 1 thằng, lỡ so sánh vài thằng thì đúng là vêu mồm tập 2 😭, giải pháp cực kì đơn giản là đảo vị trí của 2 cái cho nhau, như thế này:</p>

<pre><code class="language-java">if (&quot;CNTT&quot;.equals(baAnh.lop)) { ... }
</code></pre>

<p>Cho ra kết quả tương tự:</p>

<pre><code class="language-sh">Không học lớp CNTT
</code></pre>

<p>Đơn giản phải không nào, né được biết bao nhiêu là phiền phức, tương tự như vậy cứ đảo hết giá trị hằng so sánh lên trước, biến hoặc đối tượng cần so sánh ra sau. Ok nhé 👍</p>

<p>Chúc bạn cuối tuần vui vẻ.</p>

<p>🍀 ngbaanh 🍀</p>

<hr />

    </div>
  </div>

</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://ngbaanh.github.io/post/tap-code-2--vong-lap-vo-tan-while-hay-for/"><span
      aria-hidden="true">&larr;</span> ☘Tập Code 2: Vòng lặp vô tận WHILE hay FOR?</a></li>
    

    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div class="panel panel-default">
    <div class="panel-heading"><strong>COMMENTS</strong></div>
    <div class="panel-body">
      <div id="disqus_thread">
        <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'ngbaanh-github-io';
    var disqus_identifier = 'https:\/\/ngbaanh.github.io\/post\/tap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh\/';
    var disqus_title = '☘Tập Code 3: Tỉnh táo với phép so sánh khi lập trình';
    var disqus_url = 'https:\/\/ngbaanh.github.io\/post\/tap-code-3--tinh-tao-voi-phep-so-sanh-khi-lap-trinh\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
  </div>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 Bá Anh Nguyễn &middot; 
    
      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="/js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-93752719-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

